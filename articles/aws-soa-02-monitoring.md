---
title: "AWS SOA モニタリングとレポート / その他"
emoji: "👀"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: ["AWS","SOA"]
published: false
---

# 分野 1: モニタリングとレポート 22%

## Cloudwatch (重要)
  - 他サービスとの連携
  - CloudWatch events、alert機能の理解、データの流れの理解、メトリクス(カスタムメトリクス含む)　の仕組みと導入方法
  - CloudWatch EventsによりSNS通知をトリガー(実行)できます。
  - データポイント：デフォルトは、5分間隔。詳細モニタリングを有効にした場合、1分間隔。
  - 標準メトリクス
### カスタムメトリクス
**OSレベル**の問題チェックなど、標準メトリクスでは収集できないメトリクス。
CloudWatchエージェントを使用してメトリクス取得を設定することが必要。
AWS CLIからメトリクス(=監視対象)のモニタリング設定のスクリプトを記述して、そのメトリクスをCloudWatchにプッシュしてモニタリングを開始できる。
### CloudWatch エージェント
インストールすると、EC2インスタンスなどのシステム内部メトリクスとログファイルの両方を収集できる。
### Cloudwatch Logs
logs特定のフレーズ、値、またはパターンを⾒つけるためにログをリアルタイムでモニタリングする
### Cloudwatch Events
- ユースケース
EC2 インスタンスのリタイアメント通知に応じて、自動でEC2インスタンスを停止する
EC2インスタンスのリタイア
→AWS Healthがキャッチ
→CloudWatch Eventsを起動し、通知
→通知をトリガーとして、LambdaでEC2インスタンスを停止する関数を実行
→EC2インスタンス停止
### AWS Health
AWSのリソース、サービス、およびアカウントの状態をリアルタイムで可視化します。
### サービスヘルスダッシュボード
各AWSのサービスの全体的なステータスを確認するには適していますが、EC2インスタンスのリタイアメント通知を自動設定するといった構成には利用されません

## Cloudtrail
**ユーザの証跡**ログをとる。
  - ユースケース
  - Cloudwatch logs、CloudWatch eventsとの連携
  - API呼び出しの関する調査・記録の問題はcloudtrailが関連する可能性大。

## Config
**AWSリソースの構成情報、変更履歴**を記録。
例：未承認の AMI から起動された EC2インスタンスを検知する
ConfigにSNSを連携すれば、SNSを利用した通知設定が可能。（たとえば、リソースが更新されるとメール通知が実施されて、変更内容が表示できる。）
### Confif Rules
ルールに沿った構成変更が行われているかを評価。
- マネージドルール
AWSで定義・提供している汎用性の高いベーシックルール。
- カスタムルール
Lambdaをベースとして自分で作成するルール。
#### トリガータイプ
ルール評価実行のタイミング
- 設定変更時
- 定期的




# その他

## 責任共有モデル
### AWS責任
- ユーザーが配置したAWSクラウド内のデータの所有権はユーザーが保持。（= AWSはユーザーの管理するデータにアクセスしない）
- データセンターとリージョンを接続するAWSグローバルネットワークを流れるすべてのデータは、安全性が保証された施設から外部に通信される前に物理レイヤーで自動的に暗号化される。
- AWS側のインフラ環境は仮想化ソフトウェアでフィルタリングすることにより、ユーザーからはユーザーに割り当てられていない物理ホストまたはインスタンスにアクセスできない。
- インフラのパッチ対応・管理
AWSはインフラストラクチャへのバッチ管理やマネージド型サービスへのバッチ適用を担当する。
- インフラ構成管理
AWSはデータセンターにおけるインフラを管理する。
### ユーザ責任
- VPCネットワーク内の暗号化やセキュリティ対応

## Amazon Athena
標準SQLを使用してS3バケットにホストされているデータを分析し、レポートを作成できる。
## Amazon CloudSearch
AWSで完全に管理された検索サービス。高速で非常に拡張性の高い検索機能をアプリケーションに容易に統合できる。
## Amazon Redshift
データウェアハウス・BI（ビジネスインテリジェンス）のサービス。
## Cognito
Facebook、Google、AmazonなどのソーシャルIDプロバイダー、およびSAML 2.0によるエンタープライズIDプロバイダーを使用したサインインをサポートします。
## Single Sign-On (SSO) 
複数のAWSアカウントやビジネスアプリケーションへのSSOアクセスを簡単に一元管理できるクラウドSSOサービス。
これにより、ユーザーはAWS SSOで構成する資格情報か既存の社内認証情報を使用してユーザーポータルにサインインし、割り当てられたすべてのアカウントとアプリケーションに1か所からアクセスできます。
AWS SSOでは、OrganizationsのすべてのアカウントへのSSOアクセスとユーザーアクセス権限の一元管理が簡単になります。
また、SSOアプリケーション設定ウィザードを使用することで、Security Assertion Markup Language(SAML) 2.0 の統合を作成し、SSOアクセスを任意のSAML対応アプリケーションに拡張できます。
社内の既存の Microsoft Active Directory (AD)のIDを使用して、アカウントとアプリケーションへのSSOアクセスを管理できます。
AWS SSOはAWS Directory Serviceを通じてADと統合されるため、ユーザーを該当するADグループに追加するだけでアカウントとアプリケーションへのSSOアクセスをユーザーに許可できます。