---
title: "「ネットワークはなぜつながるのか」要点"
emoji: "📘"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["ネットワーク"]
published: false
---

# 目的
インフラ（特にネットワーク）の理解度を上げる。

そのために、下記書籍を読み、自分が理解したこと・要点を整理してメモする。

# 書籍
https://bookplus.nikkei.com/atcl/catalog/07/P83110/

### 目次
| 章 | 扱う範囲 |
| - | - |
| 第1章 | Webブラウザ |
| 第2章 | TCP/IP、LANドライバ（クライアント側） |
| 第3章 | ハブ、ルーター |
| 第4章 | 電話局、プロバイダ |
| 第5章 | ファイアウォール、キャッシュ・サーバー |
| 第6章 | LANドライバ、TCP/IP、Webサーバー・ソフト（クライアント側） |

（クライアント→サーバへの通信の流れに沿って記載している。）


# 第１章　Ｗｅｂブラウザがメッセージを作る―ブラウザ内部を探検

**ブラウザは**、入力されたURLに従って**リクエスト・メッセージを作り**、Webサーバーに送る。
ただし、**リクエストを送るのは**（ブラウザ自身でなく）**それを送る仕組み**（OSに組み込まれた*ネットワーク制御用ソフトウェア* = OSに組み込まれた**プロトコル・スタック**）**に依頼する**。



---

# 第２章　ＴＣＰ／ＩＰのデータを電気信号にして送る―プロトコル・スタックとＬＡＮアダプタを探検

ブラウザから依頼された**リクエスト・メッセージは、プロトコル・スタックがパケットの中に格納**して、さらに**宛先アドレスなどの制御情報を付加**する。

プロトコル・スタックは、そのパケットをLANアダプタに渡す。

LANアダプタは、プロトコル・スタックから渡されたパケットを**電気信号に変換**して、**LANケーブルに送り出す**。（→ネットワークの中に入る。）

## プロトコル・スタック
ネットワーク制御用ソフトウェアのこと。（*スタック = 積み重ね*）

色々な機能（通信エラー時にパケットを送り直す 等）を持っている。

## LANアダプタ
LANケーブルを差すところ。![](/images/why_connect_network/LAN-adapter.png)


# 第３章　ケーブルの先はＬＡＮ機器だった―ハブとスイッチ、ルーターを探検
:::message alert
ここでは「クライアントPCは家庭や会社のLANに接続され、その先がブロードバンド回線（光ファイバー回線など）によってインターネットに接続されている」という典型的な状況に対して説明する。
:::

LANアダプタがLANケーブルに送信したパケットは、**スイッチング・ハブ**等を経由して**ルーター**に届く。

**ルーターの先はインターネット**なので、**そこから先はプロバイダがパケットを相手まで届けてくれる**。


# 第４章　アクセス回線を通ってインターネットの内部へ―アクセス回線とプロバイダを探検
**ルーターの先のインターネット内部の話**。
インターネットの入り口にはアクセス回線（電話回線、ISDN、ADSL、専用線など）という通信回線があり、契約しているプロバイダに繋がっている。そこにはPOPというプロバイダ向けのルーターがある。
POPは最寄りの郵便局のようなもの。アクセス回線でPOPまでパケットを運んで、（POPを経由して）そこから全世界に向けて配送される。POPの先がインターネットの中核部分と言える。

（割愛）

# 第５章　サーバー側のＬＡＮには何がある
Webサーバー側のLANにたどり着くと、下記がある（かもしれない）。
- ファイアウォール : パケットをチェックする。
- キャッシュ・サーバー : 望むデータがそこにあればそこから返却する。
- 負荷分散装置 : 複数のサーバーに振り分ける。
- コンテンツ配信サービス : インターネット全体にキャッシュ・サーバーを分散する。


# 第６章　Ｗｅｂサーバーに到着し、応答データがＷｅｂブラウザに戻る―わずか数秒の「長い旅」の終わり
パケットが`Webサーバー`に到達すると、プロトコル・スタックがパケットの中身を取り出して元のリクエスト・メッセージを復元して、`Webサーバー・アプリケーション`に渡す。
Webサーバー・アプリケーションはリクエスト・メッセージの内容に従ってデータをレスポンス・メッセージに入れて送り返す。

以上