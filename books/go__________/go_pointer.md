---
title: "Go_ポインター"
---

# ポインター

## なぜポインターを使うか

値を関数に渡すとき、**その関数内での変更は、呼び出し元に影響を与えない**。

:::message
**Go は"値渡し"の言語**。
つまり、関数に値を渡すたびに、Go がその値を受け取って**ローカルコピー(メモリ内の新しい変数)を作成**する。
:::

```go
func main() {
  first := "ジョン"
  updateName(first) // 名前を更新したはずが...
  println(first) // ジョン
}

func updateName(name string) {
  name = "田中"
}
```

updateName 関数で行う変更を main 関数の first 変数にも反映させるには、ポインターを使用する。
**ポインターで、値ではなくメモリアドレスを渡すことで、呼び出し元にも反映される**。

## ポインターとは

**変数のメモリアドレス**を示すもの。

### &演算子

変数の前に`&`を書くことで、その変数の（オブジェクトの）**アドレス**を取得する。

### \*演算子

ポインターを逆参照する。つまり、ポインターに格納されたアドレスにあるオブジェクト（ポインタが指す値）へアクセスする。

:::message

- **変数**の前に`*`を書くと、その変数が指しているアドレスに格納されている**オブジェクトの値**を取得する。これを逆参照（dereferencing）と呼ぶ。

- **型名**の前に`*`を書くと、**その型の値を格納しているポインター**であることを宣言する。

:::

```go
func main() {
  first := "ジョン"
  updateName(&first) // ポインター(メモリアドレス)を渡す
  println(first) // 田中 と出力される
}

func updateName(name *string) { // stringを格納しているポインター
  *name = "田中" // ポインター先の文字列をupdate
}
```
